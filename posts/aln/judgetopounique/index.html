<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
            --font-size: 17.5px;
        }
    </style>

    
    
    
    
    
    

    
    <title>判断拓扑序是否唯一</title>
    <meta name="description" content="我们现在要解决一个问题，就如标题所说，我们要判断一个DAG的拓扑序是否唯一。
以下说两种做法。
做法1（推荐） 在拓扑排序时，我们只要每时每刻都判断一下，此时的队列大小是否大于 $1$ 即可。
因为，如果队列大小大于 $1$，则选择任何一个元素都可以加入到拓扑序的最后下标，所以拓扑序不唯一。
做法2 （以下是我考试时 …">
    <meta name="keywords" content='信息学竞赛, 算法学习笔记'>

    <meta property="og:url" content="https://qjwh.github.io/posts/aln/judgetopounique/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="判断拓扑序是否唯一">
    <meta property="og:description" content="我们现在要解决一个问题，就如标题所说，我们要判断一个DAG的拓扑序是否唯一。
以下说两种做法。
做法1（推荐） 在拓扑排序时，我们只要每时每刻都判断一下，此时的队列大小是否大于 $1$ 即可。
因为，如果队列大小大于 $1$，则选择任何一个元素都可以加入到拓扑序的最后下标，所以拓扑序不唯一。
做法2 （以下是我考试时 …">
    <meta property="og:image" content="https://qjwh.github.io/">
    <meta property="og:image:secure_url" content="https://qjwh.github.io/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="判断拓扑序是否唯一">
    <meta name="twitter:description" content="我们现在要解决一个问题，就如标题所说，我们要判断一个DAG的拓扑序是否唯一。
以下说两种做法。
做法1（推荐） 在拓扑排序时，我们只要每时每刻都判断一下，此时的队列大小是否大于 $1$ 即可。
因为，如果队列大小大于 $1$，则选择任何一个元素都可以加入到拓扑序的最后下标，所以拓扑序不唯一。
做法2 （以下是我考试时 …">
    <meta property="twitter:domain" content="https://qjwh.github.io/posts/aln/judgetopounique/">
    <meta property="twitter:url" content="https://qjwh.github.io/posts/aln/judgetopounique/">
    <meta name="twitter:image" content="https://qjwh.github.io/">

    
    <link rel="canonical" href="https://qjwh.github.io/posts/aln/judgetopounique/">

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.ad84dd09e60165f836ea08a26f86608c070e127d21ac6ab168c87da076554d87.js" integrity="sha256-rYTdCeYBZfg26giib4ZgjAcOEn0hrGqxaMh9oHZVTYc="></script>

    
    
        <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // ? auto-render specific keys, e.g.:
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
          ],
          // ? rendering keys, e.g.:
          throwOnError : false
        });
      });
    </script>
  
    
</head>
<body>
        <script>
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        

        <div class="nav-title">
            <a class="nav-brand" href="https://qjwh.github.io/">CXBlog</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://qjwh.github.io/" aria-label="home" >      <i data-feather="home"></i>
      <script>
        feather.replace();
      </script>
       首页
      </a>
            </div>
            
            <div class="nav-link">
                <a href="https://qjwh.github.io/posts" aria-label="posts" >      <i data-feather="book"></i>
      <script>
        feather.replace();
      </script>
       文章
      </a>
            </div>
            
            <div class="nav-link">
                <a href="https://qjwh.github.io/tags" aria-label="tags" >      <i data-feather="tag"></i>
      <script>
        feather.replace();
      </script>
       标签
      </a>
            </div>
            
            <div class="nav-link">
                <a href="https://qjwh.github.io/about" aria-label="about" >      <i data-feather="info"></i>
      <script>
        feather.replace();
      </script>
       关于
      </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                <a aria-hidden="true" role="switch">
                    <span class="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
                <a aria-checked="false" aria-labelledby="hamburger-menu-toggle" id="hamburger-menu-toggle-target" role="switch">
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://qjwh.github.io/" >      <i data-feather="home"></i>
      <script>
        feather.replace();
      </script>
       首页
      </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://qjwh.github.io/posts" >      <i data-feather="book"></i>
      <script>
        feather.replace();
      </script>
       文章
      </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://qjwh.github.io/tags" >      <i data-feather="tag"></i>
      <script>
        feather.replace();
      </script>
       标签
      </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://qjwh.github.io/about" >      <i data-feather="info"></i>
      <script>
        feather.replace();
      </script>
       关于
      </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
                    <a role="switch">
                        <span class="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>判断拓扑序是否唯一</h1>

        

        
	
	
	
	
        

	

	

	
          <small role="doc-subtitle"></small>
	

	
          <p class="post-date">
              

              February 9, 2025

              
          </p>
	

        <ul class="post-tags">
          
           
             <li class="post-tag"><a href="https://qjwh.github.io/tags/%E4%BF%A1%E6%81%AF%E5%AD%A6%E7%AB%9E%E8%B5%9B">信息学竞赛</a></li>
           
         
           
             <li class="post-tag"><a href="https://qjwh.github.io/tags/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">算法学习笔记</a></li>
           
         
        </ul>
    </div>

    <div class="post-content">
        <text style="font-family:Lato,楷体">
<p>我们现在要解决一个问题，就如标题所说，我们要判断一个DAG的拓扑序是否唯一。</p>
<p>以下说两种做法。</p>
<h2 id="text-stylecolorrgb0150136-做法1推荐"><text style="color:rgb(0,150,136)"> 做法1（推荐）</h2>
<p>在拓扑排序时，我们只要每时每刻都判断一下，此时的队列大小是否大于 $1$ 即可。</p>
<p>因为，如果队列大小大于 $1$，则选择任何一个元素都可以加入到拓扑序的最后下标，所以拓扑序不唯一。</p>
<h2 id="text-stylecolorrgb0150136-做法2"><text style="color:rgb(0,150,136)"> 做法2</h2>
<p>（以下是我考试时想出来的做法，思维难度较高，但整个构思过程中都没有思维跳跃）</p>
<h3 id="text-stylecolorrgb0150136-1"><text style="color:rgb(0,150,136)"> 1</h3>
<p>首先，我们建出这个DAG，然后我们考虑，其实一个DAG唯一，有且仅当对于所有点对 $(u,v)$（$1 \leq u,v \leq n$），都满足以下两点之一：</p>
<ul>
<li>点 $u$ 可以到达点 $v$。</li>
<li>点 $v$ 可以到达点 $u$。</li>
</ul>
<blockquote>
<p>此处证明一下。</p>
<p>其实，如果存在一个不满足上述条件的点对 $(u,v)$，那么整张图可能会张这样：（下面标记的 $(u,v)$ 只是其中一个）</p>
<p>在这种情况里，我们直接把红色集合和蓝色集合里的拓扑序“交换”，变成：</p>
<p>于是乎，就得到了另一个合法的拓扑序，证毕。</p>
<p>关于如果满足条件，则拓扑序唯一，此处不多赘述，自行脑补。</p></blockquote>
<h3 id="text-stylecolorrgb0150136-2"><text style="color:rgb(0,150,136)"> 2</h3>
<p>上述条件还可以继续变化，变成：</p>
<ul>
<li>对于所有点对 $(u,v)$（$1 \leq u,v \leq n$，且 $v$ 的拓扑序比 $u$ 的要大），都满足点 $u$ 可以到达点 $v$。</li>
</ul>
<h3 id="text-stylecolorrgb0150136-3"><text style="color:rgb(0,150,136)"> 3</h3>
<p>我们考虑定义函数 $f(x)$ 代表拓扑序为 $x$ 的节点，是否能到达所有拓扑序为 $y$（$x&lt;y$）的点。</p>
<h3 id="text-stylecolorrgb0150136-4"><text style="color:rgb(0,150,136)"> 4</h3>
<p>我们考虑求 $f(x)$，我们可以枚举拓扑序为 $x$ 的节点 $u$ 的所有出点 $v$（设其拓扑序为 $y$，且排除 $y \leq x$ 的所有点）。</p>
<p>然后，如果说 $f(y)$ 已经表示不可行了，输出无解。</p>
<p>否则，拓扑序为 $y \sim n$ 的点全部都可以被遍历到。</p>
<h3 id="text-stylecolorrgb0150136-5"><text style="color:rgb(0,150,136)"> 5</h3>
<p>然后，我们求出 $y$ 的最小值 $y_{\min}$。</p>
<p>那么，我们可以直接遍历到拓扑序在 $y_{\min} \sim n$ 内的所有点。</p>
<p>所以，能遍历到 $x+1 \sim n$ 内的所有点，有且仅当 $y_{\min}$ 刚好等于 $x+1$，显然。</p>
<p>而这个条件，就相当于说存在一个当前 $u$ 的出点 $v$，其拓扑序刚好比 $u$ 的拓扑序要大 $1$。</p>
<h3 id="text-stylecolorrgb0150136-6"><text style="color:rgb(0,150,136)"> 6</h3>
<p>有了这个条件，我们就可以直接判断了。</p>
<p>但还没完，我们要判断两点特殊情况：</p>
<ul>
<li>如果入度为 $0$ 的点超过 $1$ 个，拓扑序不唯一。</li>
<li>如果出度为 $0$ 的点超过 $1$ 个，拓扑序不唯一。</li>
</ul>

        
    </div>

    <div class="prev-next">
        
    </div>

    
    
    
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#text-stylecolorrgb0150136-做法1推荐"><text style="color:rgb(0,150,136)"> 做法1（推荐）</a></li>
        <li><a href="#text-stylecolorrgb0150136-做法2"><text style="color:rgb(0,150,136)"> 做法2</a>
          <ul>
            <li><a href="#text-stylecolorrgb0150136-1"><text style="color:rgb(0,150,136)"> 1</a></li>
            <li><a href="#text-stylecolorrgb0150136-2"><text style="color:rgb(0,150,136)"> 2</a></li>
            <li><a href="#text-stylecolorrgb0150136-3"><text style="color:rgb(0,150,136)"> 3</a></li>
            <li><a href="#text-stylecolorrgb0150136-4"><text style="color:rgb(0,150,136)"> 4</a></li>
            <li><a href="#text-stylecolorrgb0150136-5"><text style="color:rgb(0,150,136)"> 5</a></li>
            <li><a href="#text-stylecolorrgb0150136-6"><text style="color:rgb(0,150,136)"> 6</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    
    

    

    

    

    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/gokarna-theme/gokarna-hugo">Gokarna</a>
    </span>
</footer>
</body>
</html>
